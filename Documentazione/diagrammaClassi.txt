@startuml
class ThScatola{
'oggetto che permette l'accesso agli elementi condivisi ai Thread
DatiCondivisi dati
'salva l'id della sabbia(che corrisponde a quello della scatola in cui e` contenuta) in cui spostare la sabbia persa
int idDest
'attributo che salva l`id assegnato alla scatola
int idScatola
'la scatola deve avere una certa dimesione
int widthScatola
int heightScatola
'la scatola gestisce la sabbia contenuta in essa
Sabbia sabbia

'metodo rappresentatnte il main dei Thread
+void run()
'metodo che gestisce il movimento della sabbia verso dx
-void versoDestra(float diminuzione)
'metodo che gestisce il movimento della sabbia verso sx
-void versoSinistra(float diminuzione)
'metodo che permette di continuare a gestire il movimento della sabbia(era comune ai metodi precedenti)
-void procedi(float diminuzione)
}

class Sabbia{
'la sabbia occupa un certo volume della scatola
int percentuale
'serve a calcolare la percentuale di sabbia in spostamento
float diminuzione
'la scatola deve avere una certa dimesione
int widthSabbia
int heightSabbia

'il metodo permette di il movimento della sabbia in base all'inclinazione
+void aggiornaSabbia(int inclinazioneX)
'il metodo riporta la diminuzione a 0
+void resetDiminuzione()
'il metodo permette di aggiornare la larghezza della sabbia in base alla larghezza della scatola
+void visualizzazioneSabbia(int wScatola)
'il metodo aggiorna la percentuale in base al valore passato come parametro
+void aggiungiSabbia(int percentuale)
}

class Pallina{
'la pallina occupa una certa posizioneX sulla sabbia che cambia in base alla velocitàX
-int posX
'la pallina occupa una certa posizioneY sulla sabbia che cambia in base alla velocitàY
-int posY
'la pallina ha una certa velocità sull'asse delle x che cambia in base all'inclinazione
-int velX
'la pallina ha una certa velocità sull'asse delle y che cambia in base all'inclinazione
-int velY

'il metodo permette di aggiornare la velocità sugli assi della pallina in base all'inclinazione
+void aggiornaPallina(int inclinazione)
'il metodo permette di visualizzare la pallina dopo ogni aggiornamento dell'inclinazione
+void visualizzazionePallina()
}

class ThSensore{
'l'attributo memorizza il valore dell'inclinazione sull'asseX che permetterà di modificare le informazioni della sabbia e quindi di giocare
int valInclinazioneX
'l'attributo memorizza il valore dell'inclinazione sull'asseY che permetterà di modificare le informazioni della sabbia e quindi di giocare
int valInclinazioneY

'il metodo permette di apportare modifiche nelle informazioni legate all'inclinazioneX
+void scriviInclinazioneX(int inclinazioneX)
'il metodo permette di apportare modifiche nelle informazioni legate all'inclinazioneY
+void scriviInclinazioneX(int inclinazioneX)
}

class DatiCondivisi{
'numero di colonne
int numScatoleColonne
'vettore di oggetti sabbia, contenute nelle scatola
Sabbia[] sabbie
'l'attributo indica se si e` in gioco
boolean running
'oggetto Sensore per salvare i valori dell'inclinazione
Sensore giroscopio

'metodo che ferma il gioco
+void stop()
}

class SwingGui{
'l'attributo serve a gestire la finestra per l'utente
JFrame frame
'oggetto che permette l'accesso agli elementi condivisi ai Thread
DatiCondivisi dati

'il metodo permette di rendere visibile la finestra
+void show()
}


class NB_ProcessingScatola{
'l'attributo permette la gestione delle variabile condivise ai Thread
-static DatiCondivisi datiC
'viene definito un vettore di ThreadScatola
-static ThScatola[] box
'larghezza della canvas
-static int WScreen
'altezza della canvas
-static int WScreen

'il metodo permette di inizializzare gli attributi, creare l'oggetto contenente i dati condivisi,creare i Thread,creare le finestre 
+static void main()
'il metodo permette di settare la dimensione della finestra
+void settings()
'il metodo gestisce la grafica
+void setup()
'il metodo gestisce l'animazione
+void draw()
'il metodo gestisce l'animazione della sabbia in base all'inclinazioneX
-void displaySabbia()
}

ThScatola "0..*" -- "1" Sabbia
DatiCondivisi "1" -- "1" ThSensore
DatiCondivisi "1" -- "1" ThScatola

ThScatola "0..*" --* "1" NB_ProcessingScatola
SwingGui "1" --* "1" NB_ProcessingScatola
DatiCondivisi "1" --* "1" NB_ProcessingScatola
@enduml
